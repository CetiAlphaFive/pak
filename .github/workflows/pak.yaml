name: Daily pak build

# For now we build on push, because we can't trigger a built otherwise
on:
  push:

# on:
#   schedule:
#    - cron:  '55 6 * * *'

jobs:
  pak:
    runs-on: ${{ matrix.config.os }}
    strategy:
      fail-fast: false
      matrix:
        config:
          - { os: macOS-latest }
          - { os: ubuntu-latest }
          - { os: windows-latest }

    env:
      R_REMOTES_NO_ERRORS_FROM_WARNINGS: true

    steps:
      - uses: actions/checkout@v1
      - uses: r-hub/actions/pak-builder@feature/pak-builder
        with:
          token: ${{ secrets.TOKEN }}
